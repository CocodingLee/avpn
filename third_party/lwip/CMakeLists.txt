cmake_minimum_required(VERSION 2.6)
project(lwip C)

set(LWIP_SOURCES
	custom/lwipopts.h
	custom/arch/cc.h

	src/include/compat/posix/arpa/inet.h
	src/include/compat/posix/net/if.h
	src/include/compat/posix/netdb.h
	src/include/compat/posix/sys/socket.h
	src/include/compat/stdc/errno.h
	src/include/lwip/altcp.h
	src/include/lwip/altcp_tcp.h
	src/include/lwip/altcp_tls.h
	src/include/lwip/api.h
	src/include/lwip/apps/altcp_tls_mbedtls_opts.h
	src/include/lwip/apps/fs.h
	src/include/lwip/apps/httpd.h
	src/include/lwip/apps/httpd_opts.h
	src/include/lwip/apps/lwiperf.h
	src/include/lwip/apps/mdns.h
	src/include/lwip/apps/mdns_opts.h
	src/include/lwip/apps/mdns_priv.h
	src/include/lwip/apps/mqtt.h
	src/include/lwip/apps/mqtt_opts.h
	src/include/lwip/apps/mqtt_priv.h
	src/include/lwip/apps/netbiosns.h
	src/include/lwip/apps/netbiosns_opts.h
	src/include/lwip/apps/smtp.h
	src/include/lwip/apps/smtp_opts.h
	src/include/lwip/apps/snmp.h
	src/include/lwip/apps/snmpv3.h
	src/include/lwip/apps/snmp_core.h
	src/include/lwip/apps/snmp_mib2.h
	src/include/lwip/apps/snmp_opts.h
	src/include/lwip/apps/snmp_scalar.h
	src/include/lwip/apps/snmp_snmpv2_framework.h
	src/include/lwip/apps/snmp_snmpv2_usm.h
	src/include/lwip/apps/snmp_table.h
	src/include/lwip/apps/snmp_threadsync.h
	src/include/lwip/apps/sntp.h
	src/include/lwip/apps/sntp_opts.h
	src/include/lwip/apps/tftp_opts.h
	src/include/lwip/apps/tftp_server.h
	src/include/lwip/arch.h
	src/include/lwip/autoip.h
	src/include/lwip/debug.h
	src/include/lwip/def.h
	src/include/lwip/dhcp.h
	src/include/lwip/dhcp6.h
	src/include/lwip/dns.h
	src/include/lwip/err.h
	src/include/lwip/errno.h
	src/include/lwip/etharp.h
	src/include/lwip/ethip6.h
	src/include/lwip/icmp.h
	src/include/lwip/icmp6.h
	src/include/lwip/if_api.h
	src/include/lwip/igmp.h
	src/include/lwip/inet.h
	src/include/lwip/inet_chksum.h
	src/include/lwip/init.h
	src/include/lwip/ip.h
	src/include/lwip/ip4.h
	src/include/lwip/ip4_addr.h
	src/include/lwip/ip4_frag.h
	src/include/lwip/ip6.h
	src/include/lwip/ip6_addr.h
	src/include/lwip/ip6_frag.h
	src/include/lwip/ip6_zone.h
	src/include/lwip/ip_addr.h
	src/include/lwip/mem.h
	src/include/lwip/memp.h
	src/include/lwip/mld6.h
	src/include/lwip/nd6.h
	src/include/lwip/netbuf.h
	src/include/lwip/netdb.h
	src/include/lwip/netif.h
	src/include/lwip/netifapi.h
	src/include/lwip/opt.h
	src/include/lwip/pbuf.h
	src/include/lwip/priv/altcp_priv.h
	src/include/lwip/priv/api_msg.h
	src/include/lwip/priv/memp_priv.h
	src/include/lwip/priv/memp_std.h
	src/include/lwip/priv/nd6_priv.h
	src/include/lwip/priv/sockets_priv.h
	src/include/lwip/priv/tcpip_priv.h
	src/include/lwip/priv/tcp_priv.h
	src/include/lwip/prot/autoip.h
	src/include/lwip/prot/dhcp.h
	src/include/lwip/prot/dhcp6.h
	src/include/lwip/prot/dns.h
	src/include/lwip/prot/etharp.h
	src/include/lwip/prot/ethernet.h
	src/include/lwip/prot/iana.h
	src/include/lwip/prot/icmp.h
	src/include/lwip/prot/icmp6.h
	src/include/lwip/prot/ieee.h
	src/include/lwip/prot/igmp.h
	src/include/lwip/prot/ip.h
	src/include/lwip/prot/ip4.h
	src/include/lwip/prot/ip6.h
	src/include/lwip/prot/mld6.h
	src/include/lwip/prot/nd6.h
	src/include/lwip/prot/tcp.h
	src/include/lwip/prot/udp.h
	src/include/lwip/raw.h
	src/include/lwip/sio.h
	src/include/lwip/snmp.h
	src/include/lwip/sockets.h
	src/include/lwip/stats.h
	src/include/lwip/sys.h
	src/include/lwip/tcp.h
	src/include/lwip/tcpbase.h
	src/include/lwip/tcpip.h
	src/include/lwip/timeouts.h
	src/include/lwip/udp.h
	src/include/netif/bridgeif.h
	src/include/netif/bridgeif_opts.h
	src/include/netif/etharp.h
	src/include/netif/ethernet.h
	src/include/netif/lowpan6.h
	src/include/netif/lowpan6_opts.h
	src/include/netif/ppp/ccp.h
	src/include/netif/ppp/chap-md5.h
	src/include/netif/ppp/chap-new.h
	src/include/netif/ppp/chap_ms.h
	src/include/netif/ppp/eap.h
	src/include/netif/ppp/ecp.h
	src/include/netif/ppp/eui64.h
	src/include/netif/ppp/fsm.h
	src/include/netif/ppp/ipcp.h
	src/include/netif/ppp/ipv6cp.h
	src/include/netif/ppp/lcp.h
	src/include/netif/ppp/magic.h
	src/include/netif/ppp/mppe.h
	src/include/netif/ppp/polarssl/arc4.h
	src/include/netif/ppp/polarssl/des.h
	src/include/netif/ppp/polarssl/md4.h
	src/include/netif/ppp/polarssl/md5.h
	src/include/netif/ppp/polarssl/sha1.h
	src/include/netif/ppp/ppp.h
	src/include/netif/ppp/pppapi.h
	src/include/netif/ppp/pppcrypt.h
	src/include/netif/ppp/pppdebug.h
	src/include/netif/ppp/pppoe.h
	src/include/netif/ppp/pppol2tp.h
	src/include/netif/ppp/pppos.h
	src/include/netif/ppp/ppp_impl.h
	src/include/netif/ppp/ppp_opts.h
	src/include/netif/ppp/upap.h
	src/include/netif/ppp/vj.h
	src/include/netif/slipif.h

    src/core/udp.c
    src/core/memp.c
    src/core/init.c
    src/core/pbuf.c
    src/core/tcp.c
    src/core/tcp_out.c
    src/core/sys.c
    src/core/netif.c
    src/core/def.c
    src/core/mem.c
    src/core/tcp_in.c
    src/core/stats.c
    src/core/ip.c
    src/core/timeouts.c
    src/core/inet_chksum.c
    src/core/ipv4/icmp.c
    src/core/ipv4/ip4.c
    src/core/ipv4/ip4_addr.c
    src/core/ipv4/ip4_frag.c
    src/core/ipv6/ip6.c
    src/core/ipv6/nd6.c
    src/core/ipv6/icmp6.c
    src/core/ipv6/ip6_addr.c
    src/core/ipv6/ip6_frag.c
    custom/sys.c
)

add_library(lwip STATIC ${LWIP_SOURCES})

target_include_directories(lwip PUBLIC
	${CMAKE_CURRENT_SOURCE_DIR}/src/include
	${CMAKE_CURRENT_SOURCE_DIR}/custom
)

set_target_properties(lwip PROPERTIES FOLDER "third_party")
set_target_properties(lwip PROPERTIES POSITION_INDEPENDENT_CODE ON)
set_target_properties(lwip PROPERTIES OUTPUT_NAME lwip PREFIX "lib" CLEAN_DIRECT_OUTPUT 1)

set(LWIP_LIBRARIES lwip PARENT_SCOPE)
